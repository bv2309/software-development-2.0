{"codex_prompt":{"project_context":"Backend feature development for CoreAPI","feature_name":"User full_name response field","instructions":[{"step":"database_analysis_and_validation","details":"Inspect existing database schema to confirm presence of columns user.first_name and user.last_name. Ensure both columns are non-nullable or define fallback behavior (e.g., empty string) if nulls are possible. No schema migration is required unless columns are missing, in which case create them with appropriate VARCHAR length and indexes if user table is frequently queried."},{"step":"enum_definition","details":"Define or reuse a global enum api_endpoint_or_queried_object_interaction_type with allowed values GET_DATA and SEND_DATA. Ensure GET_DATA is used for read-only operations and is validated at compile-time or runtime depending on language/framework."},{"step":"api_contract_definition","details":"Define a GET_DATA endpoint or handler in CoreAPI for queried object 'user'. The endpoint must not accept request parameters. Document the API contract to state that the response contains a single field full_name of type string."},{"step":"data_fetching_logic","details":"Implement data access logic to fetch user.first_name and user.last_name from the user data source. Ensure efficient querying (select only required columns). Handle data access errors by throwing or returning a controlled error object."},{"step":"business_logic_full_name","details":"Implement transformation logic that joins user.first_name and user.last_name into full_name using the exact format: first_name + single space + last_name. Trim leading/trailing whitespace from both names before joining to avoid double spaces."},{"step":"response_mapping","details":"Map the computed full_name into the API response payload under the field name 'full_name'. Do not expose first_name or last_name directly in the response."},{"step":"response_handling_success","details":"On successful execution, return HTTP 200 with message 'You've successfully fetched user object.' and include the full_name field in the response body according to CoreAPI response standards."},{"step":"response_handling_error","details":"On any failure (validation, data access, or unexpected exception), return HTTP 400 with message 'System failed to retrieve the data.' Ensure no partial or sensitive data is leaked in the error response."},{"step":"testing","details":"Write unit tests for the full_name composition logic, including edge cases (extra spaces, empty strings). Write integration tests for the CoreAPI GET_DATA user endpoint to validate 200 and 400 responses and exact response payload structure."},{"step":"documentation","details":"Update CoreAPI documentation to describe the user GET_DATA endpoint, the full_name response field, response codes 200 and 400, and the enum api_endpoint_or_queried_object_interaction_type usage."}]}}